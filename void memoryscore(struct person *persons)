#include "main.h"
#include <stdlib.h>

extern int isgame;
extern int num;
extern double winwidth, winheight;
extern struct person persons[];
/*创建文件并输入成绩*/ 
void memoryscore(int score){
	
	double fH = GetFontHeight();
	double h = fH*2; // 控件高度
	double w = winwidth/4; // 控件宽度
	double x = winwidth/2;
	double y = winheight/2+3*h;
	
	drawLabel(x,y,"your name");
	
    y=y-1.5*h;
    textbox(GenUIID(0), x, y, w, h,persons[num].name, 19);
    y = winheight/2-2*h;
     if(button(GenUIID(0), x, y, w, h, "确定")){
     	isgame=0;
	 }
     
	  
	FILE *fp;
		if(num==0){
	  if((fp=fopen("./file.txt","w"))==NULL){
		printf("\n open file Fail,close!");
		getchar();
		exit(1);
	  }
    }
    else {
	  if((fp=fopen("./file.txt","a"))==NULL){
		printf("\n open file Fail,close!");
		getchar();
		exit(1);
	   }
    }
        persons[num].score=score;
	itoa(persons[num].score,persons[num].string,10);
	
	fputs(persons[num].name,fp);
	fputc('\n',fp);
	fputs(persons[num].string,fp);
	fputc('\n',fp);
	fclose(fp);
}
