#include "main.h"
#include <stdlib.h>

extern enum gstates mainstate;
extern int isgame;
extern int num,score;
extern double winwidth, winheight;
extern struct person persons[];
	char name[20]="your name";
/*创建文件并输入成绩*/ 
void memoryscore(){
	
	double fH = GetFontHeight();
	double h = fH*2; // 控件高度
	double w = winwidth/4; // 控件宽度
	double x = winwidth/2;
	double y = winheight/2+3*h;
	 DisplayClear();
	drawLabel(x,y,"your name");

    y=y-1.5*h;
    textbox(GenUIID(0), x, y, w, h,name, 20);
    y = winheight/2-2*h;
     if(button(GenUIID(0), x, y, w, h, "确定")){
	  FILE *fp;
		
	  if((fp=fopen("./file.txt","a"))==NULL){
		printf("\n open file Fail,close!");
		getchar();
		exit(1);
	  }
        strcpy(persons[num].name,name);
        persons[num].score=score;

    fprintf(fp,"%s\n%d\n",persons[num].name, persons[num].score);
	fclose(fp);
	mainstate= Welcome; 
	
	}
}
